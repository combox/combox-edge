web:
  port: 8080

ui:
  title: ComBox Status
  description: Live status of edge routing, frontend and backend services
  header: ComBox
  dashboard-heading: Service Health
  dashboard-subheading: Real-time checks for edge, app, api and storage
  logo: "https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/icons/activity.svg"
  link: "https://status.combox.local"
  buttons:
    - name: Open App
      link: "https://app.combox.local"
    - name: Open API
      link: "https://api.combox.local/healthz"
  dark-mode: false
  default-filter-by: none
  default-sort-by: group

endpoints:
  - name: edge-nginx
    group: edge
    url: "http://combox-edge-nginx/healthz"
    interval: 30s
    client:
      timeout: 5s
    conditions:
      - "[STATUS] == 200"
      - "[BODY] == pat(*ok*)"

  - name: edge-status-ui
    group: edge
    url: "http://status:8080/"
    interval: 30s
    client:
      timeout: 5s
    conditions:
      - "[STATUS] == 200"

  - name: backend
    group: core
    url: "https://combox-backend:8080/healthz"
    interval: 30s
    client:
      insecure: true
      timeout: 5s
      tls:
        certificate-file: /etc/nginx/mtls/edge.crt
        private-key-file: /etc/nginx/mtls/edge.key
    conditions:
      - "[STATUS] == 200"
      - "[BODY].status == ok"

  - name: app-web
    group: core
    url: "https://combox-app-mtls:443/"
    interval: 30s
    client:
      insecure: true
      timeout: 5s
      tls:
        certificate-file: /etc/nginx/mtls/edge.crt
        private-key-file: /etc/nginx/mtls/edge.key
    conditions:
      - "[STATUS] == 200"
      - "[BODY] == pat(*_app/immutable*)"

  - name: postgres
    group: storage
    url: "tcp://postgres:5432"
    interval: 30s
    client:
      timeout: 5s
    conditions:
      - "[CONNECTED] == true"

  - name: minio
    group: storage
    url: "http://minio:9000/minio/health/live"
    interval: 30s
    client:
      timeout: 5s
    conditions:
      - "[STATUS] == 200"
